<div class="group container">
  <div class="row">
    <div class="col-md-5">
      <h3><%= @group.name %></h3>
      <p class="group-setting">
        <% if @group.owner_id == current_user.id %>
          <%= link_to "編集", edit_category_group_path(@group.id) %>
        <% end %>
      </p>
      <div class="group-text">
        <%= simple_format @group.introduction %>
      </div>
      <div>
        <% if @group.group_member?(current_user)%>
        　<%= link_to "退出", group_leave_path(@group.id), method: :delete, class: "btn chat-out" %>
        <% else %>
          <%= link_to "参加", group_join_path(@group.id), class: "btn chat-in" %>
        <% end %>
      </div>
      <p>グループメンバー</p>
      <div class="group-field">
        <% @group.users.each do |user| %>
          <div class="box">
            <%= link_to user_path(user) do %>
              <%= attachment_image_tag user, :profile_image, fallback: "no-image.jpg", class: "profile_image" %>
              <p><%= link_to user.name, user_path(user), class: "text-dark" %></p>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
    <div class="col-md-6 offset-md-1">
      <div class="messages container">
        <div id="message" class="overflow-auto">
            <div class="table">
              <%= render "messages/messages", messages: @messages %>
            </div>
        </div>
        <% if @group.group_member?(current_user)%>
          <div class="form-group">
            <%=form_with model:[@group, @message], remote:true do |f| %>
              <%= f.text_area :content, class: "form-control", rows: "5", cols: "50" %>
              <%= f.submit "送信", placeholder: "メッセージを入力してください", class: "form-control btn" %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<%= javascript_include_tag "message.js" %>